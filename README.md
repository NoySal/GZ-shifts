# מנתח משמרות שומרים

אפליקציית ווב Streamlit מקיפה לניתוח נתוני משמרות שומרים וסטטיסטיקות עם הסרת כפילויות ולוח בקרה של שומרים מובילים.

## תכונות

### 🏆 לוח בקרה שומרים מובילים
- **שומרים הכי פעילים**: דירוגים לפי סה״כ משמרות עם גרפים אינטראקטיביים
- **מובילים לפי שעה**: ראה אילו שומרים עובדים הכי הרבה בשעות ספציפיות עם מפות חום
- **מובילים לפי עמדה**: מצא מומחים לכל עמדה
- **מטריצת ביצועים**: ניתוח מקיף כולל מדדי רב-תחומיות

### 👤 ניתוח שומר יחיד
- **בחירת שומר**: בחר כל שומר מהרשימה הנפתחת לצפייה בסטטיסטיקות שלו
- **ניתוח עמדות**: 
  - תרשים עוגה המציג התפלגות עמדות
  - תרשים עמודות עם משמרות לפי עמדה
  - טבלת סטטיסטיקות מפורטת
- **התפלגות שעתית**:
  - תרשים עמודות המציג משמרות לפי שעה
  - טבלת סטטיסטיקות שעתית
  - מפת חום שעה מול עמדה

## תכונות איכות נתונים
- **הסרת כפילויות אוטומטית**: מבטל רשומות כפולות על בסיס (שעה, תאריך, עמדה, שם_שומר)
- **אימות נתונים**: מציג ספירות לפני/אחרי
- **עיבוד נתונים נקי**: מטפל באי התאמות בשמות עמודות

## קבצים

- `guard_shift_analyzer.py` - אפליקציית Streamlit הראשית
- `shifts_structured_long.csv` - נתוני משמרות שומרים
- `requirements.txt` - תלויות Python

## איך להריץ

1. התקן את החבילות הנדרשות:
   ```
   pip install streamlit pandas plotly
   ```

2. הרץ את אפליקציית Streamlit:
   ```
   streamlit run guard_shift_analyzer.py
   ```

3. פתח את הדפדפן וגש לכתובת המוצגת (בדרך כלל http://localhost:8501)

## פורמט נתונים

קובץ ה-CSV צריך להכיל את העמודות הבאות:
- `hour` - שעת משמרת (למשל "06:00", "14:00")
- `date` - תאריך משמרת בפורמט DD/MM/YYYY
- `position` - עמדה/מיקום שומר
- `guard_name` - שם השומר

## שימוש

### ניווט
לאפליקציה יש כעת שני חלקים ראשיים הנגישים דרך הסרגל הצדדי:

1. **🏆 שומרים מובילים**: לוח בקרה סקירה המציג:
   - שומרים הכי פעילים בסך הכל
   - מבצעים מובילים לפי שעות ספציפיות
   - השומרים הטובים ביותר לכל עמדה
   - מטריצת ביצועים עם מדדי רב-תחומיות

2. **👤 ניתוח שומר יחיד**: ניתוח מפורט לשומר שנבחר:
   - בחר שם שומר מהרשימה הנפתחת בסרגל הצדדי
   - חקור את שני הטאבים:
     - **ניתוח עמדות**: ראה באילו עמדות השומר עובד הכי הרבה
     - **התפלגות שעתית**: צפה בדפוס שעות העבודה של השומר

### תכונות שומרים מובילים
- **בחירת שעה אינטראקטיבית**: בחר כל שעה לראות את המבצעים המובילים
- **מומחי עמדות**: מצא את השומרים הטובים ביותר לכל עמדה
- **מפות חום ביצועים**: ייצוג ויזואלי של דפוסי פעילות שומרים
- **ניתוח רב-תחומיות**: תרשימי פיזור המציגים סה״כ משמרות מול רב גוניות עמדות

האפליקציה מספקת סטטיסטיקות מקיפות כולל סה״כ משמרות, התפלגות עמדות, דפוסים שעתיים, ניתוח ציר זמן, ודירוגים השוואתיים בכל השומרים.
